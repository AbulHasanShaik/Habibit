"use strict";var mvxAfmstoreEditor=function(e){var t=null;return{init:function(){t=this.mediaController(),this.setupEnvironment()},mediaController:function(){var t=null,i=e("#slider_image_gallery");return{init:function(){e("#slider_images_container").on("click",".add_slider_images a",this.addGalleryImages).on("click",".slider_images a.delete",this.removeGalleryImage),this.initGalleryImagesSort()},addGalleryImages:function(a){var l=e(this),r=e("#slider_images_container").find("ul.slider_images");if(a.preventDefault(),t){t.open();return}(t=wp.media.frames.product_gallery=wp.media({title:l.data("choose"),button:{text:l.data("update")},states:[new wp.media.controller.Library({title:l.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var e=t.state().get("selection"),a=i.val();e.map(function(e){if((e=e.toJSON()).id){a=a?a+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;r.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+l.data("delete")+'">'+l.data("text")+"</a></li></ul></li>")}}),i.val(a)}),t.open()},removeGalleryImage:function(){e(this).closest("li.image").remove();var t="";return e("#slider_images_container").find("ul li.image").css("cursor","default").each(function(){t=t+e(this).attr("data-attachment_id")+","}),i.val(t),!1},initGalleryImagesSort:function(){e("#slider_images_container").find("ul.slider_images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"product-image-gallery-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){var t="";e("#slider_images_container").find("ul li.image").css("cursor","default").each(function(){t=t+e(this).attr("data-attachment_id")+","}),i.val(t)}})}}},setupEnvironment:function(){t.init()}}}(jQuery);jQuery(function(){mvxAfmstoreEditor.init()});