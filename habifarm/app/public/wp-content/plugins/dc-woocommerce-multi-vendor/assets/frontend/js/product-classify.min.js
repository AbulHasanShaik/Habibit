!function($){if("undefined"==typeof mvx_product_classify_script_data)return!1;var b,h,f,i=function(a){j(a)||a.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},j=function(a){return a.is(".processing")||a.parents(".processing").length},k=function(a){a.removeClass("processing").unblock()},l=function(a){$("html, body").animate({scrollTop:a.offset().top-100},1e3)};({$search_by_name_gtin_form:$("form.search-pro-by-name-gtin"),$searched_products_name_gtin_panel:$(".searched-products-name-gtin-panel"),$categories_search_wrapper:$(".categories-search-wrapper"),$searched_categories_results:$("#searched-categories-results"),$product_categories_wrap:$(".mvx-product-categories-wrap"),$edit_product_form:$("#mvx-edit-product-form"),init:function(){this.$search_by_name_gtin_form.on("click",".search-product-name-gtin-btn",this.show_products_searched_by_name_gtin.bind(this)),this.$search_by_name_gtin_form.on("keypress",".search-product-name-gtin-keyword",this.bind_show_products_searched_by_name_gtin.bind(this)),this.$categories_search_wrapper.on("input","#search-categories-keyword",this.show_searched_categories),this.$searched_categories_results.on("click",".list-group-item",this.show_product_classify_next_level_from_searched_term),$(document.body).on("click",".mvx-product-categories-wrap .mvx-product-cat-level .cat-item a",this.show_product_classify_next_level),$(document.body).on("click",".mvx-product-categories-wrap .classified-pro-cat-btn",this.set_classified_product_terms),$(document.body).on("click",".searched-result-products-name-gtin .mvx-create-pro-duplicate-btn",this.create_duplicate_product),this.$searched_products_name_gtin_panel.hide(),this.$searched_categories_results.hide(),this.$product_categories_wrap.append('<div class="mvx-product-cat-level initial-graphic select-category-graphic">\n                                    <img src="'+mvx_product_classify_script_data.initial_graphic_url+'" alt="select category">\n                                    <h1>'+mvx_product_classify_script_data.i18n.select_cat_list+"</h1></div>")},show_products_searched_by_name_gtin:function(){i($("form.search-pro-by-name-gtin"));var a={action:"mvx_list_a_product_by_name_or_gtin",keyword:$("input.search-product-name-gtin-keyword").val()};$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:a,success:function(a){a.results?$(".searched-result-products-name-gtin").html(a.results):$(".searched-result-products-name-gtin").html("")},complete:function(){$(".searched-products-name-gtin-panel").show(),k($("form.search-pro-by-name-gtin")),l($(".searched-products-name-gtin-panel"))}})},bind_show_products_searched_by_name_gtin:function(a){if("13"==(a.keyCode?a.keyCode:a.which)){i($("form.search-pro-by-name-gtin"));var b={action:"mvx_list_a_product_by_name_or_gtin",keyword:$("input.search-product-name-gtin-keyword").val()};$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:b,success:function(a){a.results?$(".searched-result-products-name-gtin").html(a.results):$(".searched-result-products-name-gtin").html("")},complete:function(){$(".searched-products-name-gtin-panel").show(),k($("form.search-pro-by-name-gtin")),l($(".searched-products-name-gtin-panel"))}}),a.preventDefault()}},show_searched_categories:function(){var a=$(this).val();$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:{action:"mvx_product_classify_search_category_level",keyword:a},success:function(a){$("#searched-categories-results").html(""),a.results&&$("#searched-categories-results").html(a.results)},complete:function(){$("#searched-categories-results").show()}})},show_product_classify_next_level:function(a){a.preventDefault(),i($(".mvx-product-categories-wrap"));var f=$(this).closest(".mvx-product-categories-wrap"),h=$(this).parents().find(".mvx-product-category-hierarchy"),b=$(this).parent().data("term-id"),c=$(this).parent().data("taxonomy"),d=$(this),e={action:"mvx_product_classify_next_level_list_categories",term_id:b,taxonomy:c,cat_level:d.closest(".mvx-product-categories").data("cat-level")};$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:e,success:function(a){a.hierarchy&&h.html(a.hierarchy),a.html_level&&(d.parents().siblings(".mvx-product-cat-level."+a.level+"-level-cat").nextAll().remove(),d.parents().siblings(".mvx-product-cat-level."+a.level+"-level-cat").remove(),a.is_final?(f.append('<div class="mvx-product-cat-level '+a.level+'-level-cat cat-column select-cat-button-holder" data-level="'+a.level+'" style="width: '+g+'px">'+a.html_level+"</div>"),$(".mvx-product-cat-level").mCustomScrollbar(),q()):(f.append('<div class="mvx-product-cat-level '+a.level+'-level-cat cat-column" data-level="'+a.level+'" style="width: '+g+'px">'+a.html_level+"</div>"),$(".mvx-product-cat-level").mCustomScrollbar(),q()))},complete:function(){k($(".mvx-product-categories-wrap")),$(".mvx-product-categories-wrap .mvx-product-cat-level.initial-graphic").hide(),d.parent().addClass("active").siblings().removeClass("active")}})},show_product_classify_next_level_from_searched_term:function(){i($("#searched-categories-results"));var c=$(".mvx-product-categories-wrap");$(this).parents().find(".mvx-product-category-hierarchy");var a=$(this).data("term-id"),b=$(this).data("taxonomy");$(this),$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:{action:"show_product_classify_next_level_from_searched_term",term_id:a,taxonomy:b},success:function(a){a.html_level&&(c.html(""),c.append(a.html_level),$(".mvx-product-cat-level").mCustomScrollbar(),q(),$(".mvx-product-categories-wrap .cat-column").css("width",g))},complete:function(){l($(".mvx-categories-level-panel")),k($("#searched-categories-results")),$("#searched-categories-results").hide(),$(".mvx-product-categories-wrap .mvx-product-cat-level.initial-graphic").hide()}})},set_classified_product_terms:function(){i($(this).parents(".mvx-product-cat-level"));var a=$(this).data("term-id"),b=$(this).data("taxonomy"),c=$(this);$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:{action:"mvx_set_classified_product_terms",term_id:a,taxonomy:b},success:function(a){window.location.href=a.url},complete:function(){k(c.parents(".mvx-product-cat-level"))}})},create_duplicate_product:function(){i($(this).parents(".searched-result-products-name-gtin"));var a=$(this).data("product_id"),c=$(this),b={action:"mvx_create_duplicate_product",security:mvx_product_classify_script_data.types_nonce,product_id:a};$.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:b,success:function(a){window.location.href=a.redirect_url},complete:function(){k(c.parents(".searched-result-products-name-gtin"))}})}}).init();var e,a,c=$(".mvx-product-categories-wrap"),m=c.parent(),d=$(window).width(),n=0,o=0,p=!1;d>=1100?b=3:d<=1099&&d>=640?b=2:(b=1,$(".initial-graphic").hide());var g=Math.floor((e=100/b,a=Math.pow(10,a=a=2),Math.floor(e*a)/a*c.width()/100));function q(){(h=c.find(".cat-column").last().attr("data-level"))>b?(n=(h-b)*g,o=m.width()+n,"left"==f?c.css({width:o,"margin-left":-n}):c.css({width:o,"margin-right":-n})):"left"==f?c.css({width:m.width(),"margin-left":0}):c.css({width:m.width(),"margin-right":0})}c.find(".cat-column").css("width",g),f=$("body").hasClass("rtl")?"right":"left",$(".cat-left-scroller").on("click",function(){n>0&&(n-=g,"left"==f?c.css({"margin-left":-n}):c.css({"margin-right":-n}),p=!0)}),$(".cat-right-scroller").on("click",function(){p&&h>=b&&b*g<o-n-g&&(n+=g,"left"==f?c.css({"margin-left":-n}):c.css({"margin-right":-n}))}),$("#search-list-a-product-btn").on("click",function(){var a={action:"mvx_list_a_product_by_name_or_gtin",keyword:$("#search-list-a-product-key").val()};$.post(mvx_product_classify_script_data.ajax_url,a,function(a){a.results?$(".mvx-list-of-products-wrap").html(a.results):$(".mvx-list-of-products-wrap").html("")})}),$("body").on("click",".mvx-list-of-products-wrap ul li a",function(){i($(".mvx-list-of-products-wrap"));var a=$(this).data("product_id"),b={action:"mvx_create_duplicate_product",security:wcmp_product_classify_script_data.types_nonce,product_id:a};$.post(mvx_product_classify_script_data.ajax_url,b,function(a){k($(".mvx-list-of-products-wrap")),a.status&&(window.location.href=a.redirect_url)})}),$(document.body).on("click",".mvx-product-categories-wrap .list-group-item",function(){i($(".mvx-product-categories-wrap"));var c=$(this).closest(".mvx-product-categories-wrap"),d=$(this).parents().find(".mvx-product-category-hierarchy"),a=$(this),b={action:"mvx_product_classify_next_level_list_categories",term_id:a.data("term-id"),taxonomy:a.data("taxonomy"),cat_level:a.parent().data("cat-level")};$.post(mvx_product_classify_script_data.ajax_url,b,function(b){k($(".mvx-product-categories-wrap")),b.hierarchy&&d.html(b.hierarchy),b.html_level&&(a.parents().siblings(".mvx-pro-cat-level."+b.level+"-level-cat").remove(),c.append('<div class="mvx-pro-cat-level '+b.level+'-level-cat col-md-4">'+b.html_level+"</div>")),a.addClass("active").siblings().removeClass("active")})}),$("#search-by-term-btn").on("click",function(){var a={action:"mvx_product_classify_search_category_level",keyword:$("#search-by-term-key").val()};$.post(mvx_product_classify_script_data.ajax_url,a,function(a){a.results?$(".mvx-product-category-search-result-wrap").html(a.results):$(".mvx-product-category-search-result-wrap").html("")})})}(jQuery)